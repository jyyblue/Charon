<h4 class="d-flex justify-content-between align-items-center w-100 font-weight-bold py-3 mb-4">
    <div>Add Job</div>
    <div class="btn-group">
        <label class="btn status_nav status_nav_{{ item.id }}" [ngStyle]="{background: item.color }"
            *ngFor="let item of taskStatus">{{ item.name }}</label>
    </div>
</h4>

<div class="btn-float">
    <button type="button" (click)="saveTask()" class="btn btn-primary rounded-pill d-block ">
        <span class="ion ion-md-add"></span>&nbsp; Create Job</button>
</div>

<div class="row">
    <div class="col">
        <div class="card mb-4">
            <h6 class="card-header">
                Customer Info
            </h6>
            <div class="card-body">
                <form [formGroup]="dataForm">
                    <div class="row">
                        <div class="form-group col-md-3">
                            <label class="form-label">Customer</label>
                            <ng-select [items]="customerOptions" bindLabel="dispName" bindValue="id"
                                class="CUSTOMER_UPLOAD_COMPLETE" formControlName="customer_id" name="customer_id"
                                [loading]="customerLoading"
                                [ngClass]="{'is-invalid' : submitted && f.customer_id.errors }"
                                (change)="changeCustomer($event)" [virtualScroll]="true" (scrollToEnd)="onScrollToEnd()"
                                (search)="customerSearchFn($event)" (open)="customerOpen($event)">
                                <ng-template ng-label-tmp let-item="item">
                                    <span class="ng-value-label">{{item['dispName']}}</span>
                                </ng-template>

                                <ng-template ng-option-tmp let-item="item">
                                    <span class="ng-value-label">{{item['dispName']}}</span>
                                </ng-template>
                            </ng-select>
                            <div *ngIf="f.customer_id.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.customer_id.errors.required">This field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label class="form-label">Docket Number</label>
                            <input type="text" class="form-control CUSTOMER_UPLOAD_COMPLETE" formControlName="docket"
                                name="docket" [ngClass]="{'is-invalid' : submitted && f.docket.errors }">
                            <div *ngIf="f.docket.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.docket.errors.required">Thie field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label class="form-label">Job Date</label>
                            <div class="input-group">
                                <input class="form-control CUSTOMER_UPLOAD_COMPLETE" placeholder="yyyy-mm-dd" name="dp"
                                    ngbDatepicker formControlName="job_date" name="job_date" #d="ngbDatepicker"
                                    [ngClass]="{'is-invalid' : submitted && f.job_date.errors }" readonly>
                                <div class="input-group-append">
                                    <button class="input-group-text" (click)="d.toggle()" type="button">
                                        <span class="ion ion-md-calendar" style="cursor: pointer;"></span>
                                    </button>
                                </div>
                            </div>
                            <div *ngIf="f.job_date.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.job_date.errors.required">This field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md-3">
                            <label class="form-label">Vehicle Size</label>
                            <ng-select [items]="vehicleOptions" bindLabel="label" bindValue="value"
                                class="CUSTOMER_UPLOAD_COMPLETE" formControlName="vehicle_type" name="vehicle_type"
                                [loading]="vehicleLoading"
                                [ngClass]="{'is-invalid' : submitted && f.vehicle_type.errors }"
                                (change)="changeVehicle()">
                                <ng-template ng-label-tmp let-item="item">
                                    <span class="ng-value-label">{{item['label']}}</span>
                                </ng-template>

                                <ng-template ng-option-tmp let-item="item">
                                    <span class="ng-value-label">{{item['label']}}</span>
                                </ng-template>
                            </ng-select>
                            <div *ngIf="f.vehicle_type.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.vehicle_type.errors.required">This field is Required</div>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col-md-6">
                        <form [formGroup]="dataForm">
                            <div class="row">
                                <div class="form-group col-md-4">
                                    <label class="form-label">Journey</label>
                                    <input class="form-control CUSTOMER_UPLOAD_COMPLETE" formControlName="source"
                                        name="source" [ngClass]="{'is-invalid' : submitted && f.source.errors}" />
                                    <div *ngIf="f.source.errors && submitted" class="invalid-feedback">
                                        <div *ngIf="f.source.errors.required">This field is Required
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label class="form-label">Mileage</label>
                                    <input type="number" min="0" class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                        formControlName="mileage" name="mileage"
                                        [ngClass]="{'is-invalid' : submitted && f.source.errors}" />
                                    <div *ngIf="f.mileage.errors && submitted" class="invalid-feedback">
                                        <div *ngIf="f.mileage.errors.required">This field is Required
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label class="form-label">Number of Stop</label>
                                    <input type="number" min="0" class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                        formControlName="stop_number" name="stop_number"
                                        [ngClass]="{'is-invalid' : submitted && f.source.errors}" />
                                    <div *ngIf="f.stop_number.errors && submitted" class="invalid-feedback">
                                        <div *ngIf="f.stop_number.errors.required">This field is Required
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <!-- <div class="form-group">
                            Journey
                            <div class="btn-group">
                                <button class="btn btn-primary" (click)="addJourney()">+</button>
                                <button class="btn btn-secondary" (click)="removeJourney()">-</button>
                            </div>
                        </div>
                        <table class="table">
                            <tr>
                                <th>Source</th>
                                <th>Destination</th>
                            </tr>
                            <tbody>
                                <tr *ngFor="let item of journey">
                                    <td>
                                        <input type="text" class="form-control" [(ngModel)]="item['src']" />
                                    </td>
                                    <td>
                                        <input type="text" class="form-control" [(ngModel)]="item['dst']" />
                                    </td>
                                </tr>
                            </tbody>
                            <div [ngClass]="{'d-block' : submitted && journeyError }" class="invalid-feedback">
                                <div>This field is Required</div>
                            </div>
                        </table> -->
                    </div>
                    <div class="col-md-6">
                        <form [formGroup]="dataForm">
                            <div class="row">
                                <table class="table price-table mr-3 ml-3">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <label class="form-label">Journey Price</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">VAT</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">Total Price ( inc vat )</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group"
                                                        [ngClass]="{'is-invalid' : submitted && f.d_extra.errors}">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_price" name="c_price"
                                                            (change)="changePrice()" step="0.01">
                                                    </div>
                                                    <div *ngIf="f.c_price.errors && submitted" class="invalid-feedback">
                                                        <div *ngIf="f.c_price.errors.required">This field is Required
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        +
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <ng-select [items]="vatOptions" bindLabel="label" bindValue="value"
                                                        class="CUSTOMER_UPLOAD_COMPLETE" formControlName="c_vat"
                                                        name="c_vat" placeholder="Select VAT" (change)="changePrice()"
                                                        [ngClass]="{'is-invalid' : submitted && f.c_vat.errors }">
                                                        <ng-template ng-label-tmp let-item="item">
                                                            <span class="ng-value-label">{{item['label']}}</span>
                                                        </ng-template>

                                                        <ng-template ng-option-tmp let-item="item">
                                                            <span class="ng-value-label">{{item['label']}}</span>
                                                        </ng-template>
                                                    </ng-select>
                                                    <div *ngIf="f.c_vat.errors && submitted" class="invalid-feedback">
                                                        <div *ngIf="f.c_vat.errors.required">This field is Required
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        =
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_price_total" readonly />
                                                    </div>

                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label">20% VAT Docket Extra</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">VAT</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">Total Price ( inc vat )</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group"
                                                        [ngClass]="{'is-invalid' : submitted && f.c_extra.errors }">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_extra" name="c_extra"
                                                            (change)="changePrice()">
                                                    </div>

                                                    <div *ngIf="f.c_extra.errors && submitted" class="invalid-feedback">
                                                        <div *ngIf="f.c_extra.errors.required">This field is Required
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        +
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <input type="text" class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                        value="20% (fixed )" readonly>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        =
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input typ="number" step="0.01"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_extra_total" readonly />
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label">0% VAT Docket Extra</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">VAT</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label"> </label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group"
                                                        [ngClass]="{'is-invalid' : submitted && f.c_extra_0.errors }">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_extra_0" name="c_extra_0"
                                                            (change)="changePrice()">
                                                    </div>

                                                    <div *ngIf="f.c_extra_0.errors && submitted"
                                                        class="invalid-feedback">
                                                        <div *ngIf="f.c_extra_0.errors.required">This field is Required
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        +
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <input type="text" class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                        value="0% (fixed )" readonly>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        =
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input typ="number" step="0.01"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_extra_total_0" readonly />
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label">Net Price</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">VAT</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">Total Price ( inc vat )</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_net" name="c_net" readonly>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        +
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_vat_total" name="c_vat_total" readonly>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        =
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01"
                                                            class="form-control CUSTOMER_UPLOAD_COMPLETE"
                                                            formControlName="c_tprice" name="c_tprice" readonly>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col">
        <form [formGroup]="dataForm">
            <div class="card mb-4">
                <h6 class="card-header">
                    Driver Info
                </h6>
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group col-md">
                            <label class="form-label">Driver<span
                                    class="text-danger ml-2 text-big text-weight-bolder">*</span></label>
                            <ng-select [items]="driverOptions" bindLabel="dispName" bindValue="id"
                                [loading]="driverLoading" formControlName="driver_id" name="driver_id"
                                [ngClass]="{'is-invalid' : submitted && f.driver_id.errors, 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1  }"
                                (change)="changeDriver($event)" [virtualScroll]="true"
                                (scrollToEnd)="onScrollToEndDriver()" (search)="driverSearchFn($event)"
                                (open)="driverOpen($event)">
                                <ng-template ng-label-tmp let-item="item">
                                    <span class="ng-value-label">{{item['dispName']}}</span>
                                </ng-template>

                                <ng-template ng-option-tmp let-item="item">
                                    <span class="ng-value-label">{{item['dispName']}}</span>
                                </ng-template>
                            </ng-select>
                            <div *ngIf="f.driver_id.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.driver_id.errors.required">This field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md">
                            <label class="form-label">Call Sign<span
                                    class="text-danger ml-2 text-big text-weight-bolder">*</span></label>
                            <input type="text" class="form-control" formControlName="call_sign" name="call_sign"
                                [ngClass]="{'is-invalid' : submitted && f.call_sign.errors , 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1}">
                            <div *ngIf="f.call_sign.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.call_sign.errors.required">This field is Required</div>
                            </div>
                        </div>

                        <div class="form-group col-md">
                            <label class="form-label">Type</label>
                            <ng-select [items]="typeOptions" bindLabel="label" bindValue="value"
                                formControlName="driver_type" placeholder="Select Type"
                                [ngClass]="{'is-invalid' : submitted && f.driver_type.errors, 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1}">
                                <ng-template ng-label-tmp let-item="item">
                                    <span class="ng-value-label">{{item['label']}}</span>
                                </ng-template>

                                <ng-template ng-option-tmp let-item="item">
                                    <span class="ng-value-label">{{item['label']}}</span>
                                </ng-template>
                            </ng-select>
                            <div *ngIf="f.driver_type.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.driver_type.errors.required">This field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md" *ngIf="f.driver_type.value==1">
                            <label class="form-label">CX Number</label>
                            <input type="text" class="form-control" formControlName="cx_number" name="cx_number"
                                [ngClass]="{ 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1 }">
                        </div>

                        <div class="form-group col-md">
                            <label class="form-label">Vehicle Size<span
                                    class="text-danger ml-2 text-big text-weight-bolder">*</span></label>
                            <ng-select [items]="vehicleOptions" bindLabel="label" bindValue="value"
                                formControlName="driver_vehicle" placeholder="Select Type"
                                [ngClass]="{'is-invalid' : submitted && f.driver_vehicle.errors , 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1}">
                                <ng-template ng-label-tmp let-item="item">
                                    <span class="ng-value-label">{{item['label']}}</span>
                                </ng-template>

                                <ng-template ng-option-tmp let-item="item">
                                    <span class="ng-value-label">{{item['label']}}</span>
                                </ng-template>
                            </ng-select>
                            <div *ngIf="f.driver_vehicle.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.driver_vehicle.errors.required">This field is Required</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md">
                            <label class="form-label">Driver Job Ref / CX Ref<span
                                    class="text-danger ml-2 text-big text-weight-bolder">*</span></label>
                            <input type="text" class="form-control" formControlName="job_ref" name="job_ref"
                                [ngClass]="{'is-invalid' : submitted && f.job_ref.errors , 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1}">
                            <div *ngIf="f.job_ref.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.job_ref.errors.required">Thie field is Required</div>
                            </div>
                        </div>


                        <div class="form-group col-md">
                            <label class="form-label">Invoice Date<span
                                    class="text-danger ml-2 text-big text-weight-bolder">*</span></label>
                            <div class="input-group">
                                <input class="form-control" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker
                                    formControlName="invoice_date" name="invoice_date"
                                    (ngModelChange)="onDateChange($event)" #d1="ngbDatepicker"
                                    [ngClass]="{'is-invalid' : submitted && f.invoice_date.errors , 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 3}">
                                <div class="input-group-append">
                                    <button class="input-group-text" (click)="d1.toggle()" type="button">
                                        <span class="ion ion-md-calendar" style="cursor: pointer;"></span>
                                    </button>
                                </div>
                            </div>
                            <div *ngIf="f.invoice_date.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.invoice_date.errors.required">Thie field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md">
                            <label class="form-label">Driver Invoice No or CX Invoice Number<span
                                    class="text-danger ml-2 text-big text-weight-bolder">*</span></label>
                            <input type="text" class="form-control" formControlName="invoice_number"
                                name="invoice_number"
                                [ngClass]="{'is-invalid' : submitted && f.invoice_number.errors , 'bg-warning' : data._status != null && data._status.id == 3}">
                            <div *ngIf="f.invoice_number.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.invoice_number.errors.required">Thie field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md">
                            <label class="form-label">Date Invoice received<span
                                    class="text-danger ml-2 text-big text-weight-bolder">*</span></label>
                            <div class="input-group">
                                <input class="form-control" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker
                                    formControlName="invoice_received_date" name="invoice_received_date"
                                    #d3="ngbDatepicker"
                                    [ngClass]="{'is-invalid' : submitted && f.invoice_received_date.errors, 'bg-warning' : data._status != null && data._status.id == 3 }">
                                <div class="input-group-append">
                                    <button class="input-group-text" (click)="d3.toggle()" type="button">
                                        <span class="ion ion-md-calendar" style="cursor: pointer;"></span>
                                    </button>
                                </div>
                            </div>
                            <div *ngIf="f.invoice_received_date.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.invoice_received_date.errors.required">Thie field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md">
                            <label class="form-label">Target Payment Date</label>
                            <input type="text" class="form-control" formControlName="target_payment_date"
                                name="target_payment_date"
                                [ngClass]="{'bg-warning' : data._status != null && data._status.id == 3}" disabled>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-md-3">
                            <div class="mb-2" *ngIf="data.pod_file">
                                <a href="{{ downloadurl }}?filename={{ data.pod_file }}"
                                    class="btn btn-info rounded-pill">Download</a>
                            </div>

                            <div class="form-group w-100 p-3 border-success" style="border: 2px dashed"
                                [ngClass]="{'bg-warning' : data._status != null && data._status.id == 3 && f.has_pod.value != true }">
                                <div class="d-flex mb-2">
                                    <label class="form-label w-100">Upload POD</label>
                                    <div class="w-100 d-flex" style="direction:rtl;">
                                        <button class="btn btn-primary" (click)="onReset()">Reset</button>
                                        <label class="form-check form-check-inline" style="direction:ltr;">
                                            <input class="form-check-input" type="checkbox" id="has_pod"
                                                (change)="onCheckChange($event)" name="has_pod"
                                                [checked]="f.has_pod.value">
                                            <span class="form-check-label">
                                                No Pod
                                            </span>
                                        </label>
                                    </div>
                                </div>
                                <div class="dropzone dropzone-container" [dropzone]="dropzoneConfig"
                                    (reset)="resetThumbnail()" (error)="onErrorThumb($event)"
                                    (success)="onSuccessThumb($event)" (canceled)="onCancel($event)"
                                    [disabled]="disableDropZone"
                                    [ngClass]="{'is-invalid':  submitted && f.pod_file.errors }">
                                    <div class="dz-message needsclick">
                                        Drop POD file here or click to upload
                                        <span class="note needsclick">(Preview File would be removed after 20
                                            second.)</span>
                                    </div>
                                </div>
                                <input class="form-control" formControlName="pod_file" type="hidden" name="pod_file"
                                    [ngClass]="{'is-invalid':  submitted && f.pod_file.errors }">
                                <div *ngIf="submitted && f.pod_file.errors" class="invalid-feedback">
                                    <div *ngIf="f.pod_file.errors.required">This field is Required</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-row">
                                <div class="form-group col-md">
                                    <label class="form-label">Bank Name</label>
                                    <input class="form-control" readonly [value]="driver ? driver.bank_name : ''" />
                                </div>
                                <div class="form-group col-md">
                                    <label class="form-label">Payee Name</label>
                                    <input class="form-control" readonly [value]="driver ? driver.payee_name : ''" />
                                </div>
                            </div>

                            <div class="form-row">

                                <div class="form-group col-md">
                                    <label class="form-label">Bank Sort Code</label>
                                    <input class="form-control" readonly [value]="driver ? driver.bank_sort_code: ''" />
                                </div>
                                <div class="form-group col-md">
                                    <label class="form-label">Bank Account Number</label>
                                    <input class="form-control" readonly
                                        [value]="driver ? driver.bank_account_number : ''" />
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md">
                                    <label class="form-label">VAT</label>
                                    <select class="form-control" value="driver ? driver.vat: ''" disabled>
                                        <option value="{{ item.value }}" *ngFor="let item of vatOptions">{{ item.label
                                            }}</option>
                                    </select>
                                </div>
                                <div class="form-group col-md" *ngIf="driver.vat == 2">
                                    <label class="form-label">VAT Number</label>
                                    <input class="form-control" readonly [value]="driver ? driver.vat_number: ''" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row">
                                <table class="table price-table mr-3 ml-3">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <label class="form-label">Journey Price</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">VAT</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">Total Price ( inc vat )</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group"
                                                        [ngClass]="{'is-invalid': submitted && f.d_price.errors }">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" class="form-control"
                                                            formControlName="d_price" name="d_price"
                                                            (change)="changePrice()" step="0.01"
                                                            [ngClass]="{'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1}">
                                                    </div>

                                                    <div *ngIf="f.d_price.errors && submitted" class="invalid-feedback">
                                                        <div *ngIf="f.d_price.errors.required">This field is Required
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        +
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <ng-select [items]="vatOptions" bindLabel="label" bindValue="value"
                                                        formControlName="d_vat" name="d_vat" placeholder="Select VAT"
                                                        (change)="changePrice()"
                                                        [ngClass]="{'is-invalid' : submitted && f.d_vat.errors,'custom': data._status != null && data.status == 1 }">
                                                        <ng-template ng-label-tmp let-item="item">
                                                            <span class="ng-value-label">{{item['label']}}</span>
                                                        </ng-template>

                                                        <ng-template ng-option-tmp let-item="item">
                                                            <span class="ng-value-label">{{item['label']}}</span>
                                                        </ng-template>
                                                    </ng-select>
                                                    <div *ngIf="f.d_vat.errors && submitted" class="invalid-feedback">
                                                        <div *ngIf="f.d_vat.errors.required">This field is Required
                                                        </div>
                                                    </div>
                                                </div>

                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        =
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input typ="number" step="0.01" class="form-control"
                                                            formControlName="d_price_total" readonly
                                                            [ngClass]="{ 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1 }" />
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label">20% VAT Docket Extra</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">VAT</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">Total Price ( inc vat )</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group"
                                                        [ngClass]="{'is-invalid' : submitted && f.d_extra.errors}">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01" class="form-control"
                                                            formControlName="d_extra" name="d_extra"
                                                            [ngClass]="{'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1}"
                                                            (change)="changePrice()">
                                                    </div>

                                                    <div *ngIf="f.d_extra.errors && submitted" class="invalid-feedback">
                                                        <div *ngIf="f.d_extra.errors.required">This field is Required
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        +
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <input type="text" class="form-control" readonly value="20% (fixed)"
                                                        [ngClass]="{ 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1 }">
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        =
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input typ="number" step="0.01" class="form-control"
                                                            formControlName="d_extra_total" readonly
                                                            [ngClass]="{ 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1 }" />
                                                    </div>


                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label">0% VAT Docket Extra</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">VAT</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label"></label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group"
                                                        [ngClass]="{'is-invalid' : submitted && f.d_extra_0.errors}">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01" class="form-control"
                                                            formControlName="d_extra_0" name="d_extra_0"
                                                            [ngClass]="{'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1}"
                                                            (change)="changePrice()">
                                                    </div>


                                                    <div *ngIf="f.d_extra_0.errors && submitted"
                                                        class="invalid-feedback">
                                                        <div *ngIf="f.d_extra_0.errors.required">This field is Required
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        +
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <input type="text" class="form-control" readonly value="0% (fixed)"
                                                        [ngClass]="{ 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1 }">
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        =
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input typ="number" step="0.01" class="form-control"
                                                            formControlName="d_extra_total_0" readonly
                                                            [ngClass]="{ 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1 }" />
                                                    </div>

                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <label class="form-label">Net Price</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">VAT</label>
                                            </td>
                                            <td></td>
                                            <td>
                                                <label class="form-label">Total Price ( inc vat )</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01" class="form-control"
                                                            formControlName="d_net" name="d_net" readonly
                                                            [ngClass]="{ 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1 }">
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        +
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-group">
                                                        <div class="input-group">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text">&pound;</span>
                                                            </div>
                                                            <input type="number" step="0.01" class="form-control"
                                                                formControlName="d_vat_total" name="d_vat_total"
                                                                readonly
                                                                [ngClass]="{ 'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1 }">
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="form-control text-center border-0">
                                                        =
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="input-group"
                                                        [ngClass]="{'is-invalid' : submitted && f.d_tprice.errors}">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">&pound;</span>
                                                        </div>
                                                        <input type="number" step="0.01" class="form-control"
                                                            formControlName="d_tprice" name="d_tprice" min="1.0"
                                                            readonly
                                                            [ngClass]="{'DRIVER_PROCESS_1_COMPLETE' : data._status != null && data._status.id == 1}">
                                                    </div>

                                                    <div *ngIf="f.d_tprice.errors && submitted"
                                                        class="invalid-feedback">
                                                        <div *ngIf="f.d_tprice.errors.min">Thie field is Required</div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </form>
    </div>
</div>

<div class="row mt-2">
    <div class="col">
        <div class="card mb-4">
            <h6 class="card-header">
                Progress
            </h6>
            <div class="card-body">
                <form [formGroup]="dataForm">
                    <div class="form-row">
                        <div class="form-group col-md"
                            [ngClass]="{'bg-warning' : data._status != null && data._status.id == 3 }">
                            <label class="form-check form-check-inline"
                                [ngClass]="{'is-invalid' : submitted && f.check_price.errors }">
                                <input class="form-check-input" type="checkbox" id="check_price"
                                    (change)="onCheckChange($event)" name="check_price" [checked]="f.check_price.value">
                                <span class="form-check-label">
                                    Price checked on ACI
                                </span>
                            </label>
                            <div *ngIf="f.check_price.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.check_price.errors.required">Thie field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md"
                            [ngClass]="{'bg-warning' : data._status != null && data._status.id == 3 }">
                            <label class="form-check form-check-inline"
                                [ngClass]="{'is-invalid' : submitted && f.check_docket_off.errors }">
                                <input class="form-check-input" type="checkbox" id="check_docket_off"
                                    (change)="onCheckChange($event)" name="check_docket_off"
                                    [checked]="f.check_docket_off.value">
                                <span class="form-check-label">
                                    Docket off hold on ACI and Reference Added
                                </span>
                            </label>
                            <div *ngIf="f.check_docket_off.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.check_docket_off.errors.required">Thie field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md"
                            [ngClass]="{'bg-warning' : data._status != null && data._status.id == 3 }">
                            <label class="form-check form-check-inline"
                                [ngClass]="{'is-invalid' : submitted && f.check_bank.errors }">
                                <input class="form-check-input" type="checkbox" id="check_bank"
                                    (change)="onCheckChange($event)" name="check_bank" [checked]="f.check_bank.value">
                                <span class="form-check-label">
                                    Bank and VAT details checked
                                </span>
                            </label>
                            <div *ngIf="f.check_bank.errors && submitted" class="invalid-feedback">
                                <div *ngIf="f.check_bank.errors.required">Thie field is Required</div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-2">
    <div class="col">
        <div class="card mb-4">
            <h6 class="card-header">
                Dispute History
            </h6>
            <div class="card-body">
                <div class="" *ngFor="let item of data.query_history">
                    <div class="col-md">
                        <label class="form-label btn-sm rounded-pill" *ngIf="item.status == 2"
                            [ngStyle]="{background: item._status ? item._status.color  : '#fff'}">Query</label>
                        <label class="form-label btn-sm rounded-pill" *ngIf="item.status != 2"
                            [ngStyle]="{background: item._status ? item._status.color  : '#fff'}">Resolve</label>
                        <p class="">
                            {{ item.description }}
                        </p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-2">
    <div class="col">
        <div class="card mb-4">
            <h6 class="card-header">
                Summary
            </h6>
            <div class="card-body">
                <form [formGroup]="dataForm">
                    <div class="form-row">
                        <!-- completed pending payment -->
                        <div class="form-group col-md-4">
                            <label class="form-label">Payment Date</label>
                            <div class="input-group" [ngClass]="{'is-invalid': submitted && f.payment_date.errors}">
                                <input class="form-control" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker
                                    formControlName="payment_date" name="payment_date" #d2="ngbDatepicker" readonly
                                    [ngClass]="{'bg-warning' : data._status != null && data._status.id == 4}">
                                <div class="input-group-append">
                                    <button class="input-group-text" (click)="d2.toggle()" type="button">
                                        <span class="ion ion-md-calendar" style="cursor: pointer;"></span>
                                    </button>
                                </div>
                            </div>
                            <div *ngIf="submitted && f.payment_date.errors" class="invalid-feedback">
                                <div *ngIf="f.payment_date.errors.required">This field is Required</div>
                            </div>
                        </div>

                        <div class="form-group col-md-4">
                            <label class="form-label">Payment Reference</label>
                            <input type="text" class="form-control" formControlName="payment_reference"
                                name="payment_reference"
                                [ngClass]="{'is-invalid': submitted && f.payment_reference.errors , 'bg-warning' : data._status != null && data._status.id == 4}">
                            <div *ngIf="submitted && f.payment_reference.errors" class="invalid-feedback">
                                <div *ngIf="f.payment_reference.errors.required">This field is Required</div>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label class="form-label">Total Payment</label>
                            <div class="input-group" [ngClass]="{'is-invalid': submitted && f.total_payment.errors }">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">&pound;</span>
                                </div>
                                <input type="number" step="0.01" class="form-control" formControlName="total_payment"
                                    name="total_payment"
                                    [ngClass]="{'bg-warning' : data._status != null && data._status.id == 4}">
                            </div>

                            <div *ngIf="submitted && f.total_payment.errors" class="invalid-feedback">
                                <div *ngIf="f.total_payment.errors.required">This field is Required</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label class="form-label">Profit &pound;</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">&pound;</span>
                                </div>
                                <input type="number" class="form-control" formControlName="profit" name="profit"
                                    readonly>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label class="form-label">&nbsp;</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">%</span>
                                </div>
                                <input type="number" class="form-control" formControlName="profitpercent"
                                    name="profitpercent" readonly>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Success</h4>
            </div>
            <div class="modal-body">
                You created job successfully!
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary" (click)="editTask()">Edit</button>
                <button type="button" class="btn btn-dark" (click)="onGoJobList()">Go Job List</button>
            </div>
        </div>
    </div>
</div>