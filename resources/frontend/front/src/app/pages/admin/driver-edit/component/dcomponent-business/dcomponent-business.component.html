<!-- Table -->
<hr class="border-light m-0">

<button class="btn btn-warning rounded-pill float-right"
data-toggle="modal" data-target="#newDocumentModal">Add Document</button>

<div class="table-responsive">
    <table class="table table-striped table-bordered card-table">
        <thead>
            <tr>
                <th class="text-nowrap cursor-pointer">
                    Valid
                </th>
                <th class="text-nowrap cursor-pointer">
                    Document Name
                </th>
                <th class="text-nowrap cursor-pointer">
                    Uploaded
                </th>
                <th class="text-nowrap cursor-pointer">
                    Expiry /Renewal Date
                </th>
                <th class="text-nowrap cursor-pointer">
                    Action
                </th>
            </tr>
        </thead>
        <input hidden type="file" accept="" id="uploader" (change)="uploadFile($event)" />
        <tbody class="job-list-table">
            <tr *ngFor="let doc of documentList">
                <td class="align-middle">
                    <input 
                        [(ngModel)]="doc.pass"
                        type="checkbox"
                    />
                </td>
                <td class="align-middle">{{ doc.name }}</td>
                <td class="align-middle">
                    <div class="input-group">
                        <input 
                            class="form-control"
                            placeholder="yyyy-mm-dd"
                            ngbDatepicker 
                            name="birthday" 
                            #d="ngbDatepicker" 
                            [(ngModel)]="doc.tdate"
                            (ngModelChange)="onDateChange($event, doc.idx)"
                            [ngClass]="{'is-invalid' : submitted && doc.errors }" 
                            readonly (click)="d.toggle()"
                        />
                        <div class="input-group-append">
                            <button class="input-group-text" (click)="d.toggle()" type="button">
                                <span class="ion ion-md-calendar" style="cursor: pointer;"></span>
                            </button>
                        </div>
                    </div>
                </td>
                <td class="align-middle">{{ doc.expire }}</td>
                <td>
                    <div class="d-inline-flex">
                        <a class="btn btn-default icon-btn md-btn-flat" ngbtooltip="Upload" (click)="uploadDocument(doc.idx)">
                            <i class="ion ion-md-cloud-upload"></i>
                        </a>

                        <button ngbtooltip="Delete" 
                            class="btn
                            btn-default
                            icon-btn md-btn-flat" [ngClass]="{'noClick' : doc.file
                            == '' }" [swal]="{title:'Delete attached file.', text:'You won\'t
                            be able to revert this!', icon:'warning',
                            showCancelButton:true, confirmButtonText:'Yes,
                            delete it!', showCloseButton:true, customClass:
                            {confirmButton:'btn btn-lg
                            btn-warning',cancelButton: 'btn btn-lg
                            btn-default'}}" (confirm)="deleteDocument(doc.idx)">
                            <i class="ion ion-md-close-circle"></i>
                        </button>
                        <a [ngClass]="{'noClick' : doc.file == '' }" class="btn
                            btn-default
                            icon-btn md-btn-flat" ngbtooltip="View" href="{{
                                downloadurl }}?driver={{ driver_id }}&filename={{
                                    doc.file }}">
                            <i class="ion ion-md-cloud-download"></i>
                        </a>
                        <button ngbtooltip="Remove" 
                        class="btn
                        btn-default
                        icon-btn md-btn-flat" [swal]="{title:'Delete Document Item', text:'You won\'t
                        be able to revert this!', icon:'warning',
                        showCancelButton:true, confirmButtonText:'Yes,
                        delete it!', showCloseButton:true, customClass:
                        {confirmButton:'btn btn-lg
                        btn-warning',cancelButton: 'btn btn-lg
                        btn-default'}}" (confirm)="deleteDocument(doc.idx, true)">
                        <i class="ion ion-md-trash"></i>
                    </button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<button 
    type="button"
    (click)="onSubmit()"
    class="btn btn-primary
    rounded-pill d-block"
>
    <span class="ion ion-md-add"></span>&nbsp; Update
</button>
<!-- / Table -->
<!-- Table -->
<hr class="border-light m-0">

<div class="modal" id="newDocumentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary">
                <h4 class="modal-title" id="myModalLabel">Add New Document</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Please note the reason of resolve</label>
                    <input class="form-control" id="document_name" [(ngModel)]="new_document_name"/>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-warning" (click)="addNewDocument()">Add</button>
                <button type="button" class="btn btn-dark" (click)="onModalClose()">Close</button>
            </div>
        </div>
    </div>
</div>
